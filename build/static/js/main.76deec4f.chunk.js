(this.webpackJsonpballoons=this.webpackJsonpballoons||[]).push([[0],{262:function(e,t,s){},279:function(e,t){},302:function(e,t){},304:function(e,t){},380:function(e,t){},382:function(e,t){},39:function(e,t,s){},414:function(e,t){},419:function(e,t){},421:function(e,t){},428:function(e,t){},441:function(e,t){},536:function(e,t){},546:function(e,t,s){"use strict";s.r(t);var n,a=s(66),i=s(9),o=s.n(i),r=s(43),c=s.n(r),l=(s(262),s(3)),d=s(5),u=s(7),h=s(6),p=s(552),b=s(553),j=(s.p,s(39),s(4)),m=s.n(j),g=s(141),f=s(10),O=s(44),y=s(100),v=s.n(y),x="http://cryptopop.fun:5001/",w=s(8),k=[],S=[],C=[],B=[],L=[],M=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).state={game:null},n}return Object(d.a)(s,[{key:"preload",value:function(){this.load.image("background","./phaser/Background.png"),this.load.spritesheet("balloon","./phaser/Balloon Pop.png",{frameWidth:390,frameHeight:481}),this.load.image("cloudBack","./phaser/Clouds_03_Back.png"),this.load.image("cloudMid","./phaser/Clouds_02_Middle.png"),this.load.image("cloudFront","./phaser/Clouds_01_Front.png")}},{key:"create",value:function(){var e=this,t=this.add.sprite(0,0,"background");t.displayWidth=window.innerWidth,t.displayHeight=window.innerHeight,t.setOrigin(0,0),this.cloudBack=this.add.tileSprite(window.innerWidth/2,window.innerHeight/2,window.innerWidth,window.innerHeight,"cloudBack"),this.cloudBack.setScale(1),this.cloudBack.tileScaleX=.5,this.cloudBack.tileScaleY=.6,this.cloudMid=this.add.tileSprite(window.innerWidth/2,window.innerHeight/2,window.innerWidth,window.innerHeight,"cloudMid"),this.cloudMid.setScale(1),this.cloudMid.tileScaleX=.5,this.cloudMid.tileScaleY=.6,this.cloudFront=this.add.tileSprite(window.innerWidth/2,window.innerHeight/2,window.innerWidth,window.innerHeight,"cloudFront"),this.cloudFront.setScale(1),this.cloudFront.tileScaleX=.5,this.cloudFront.tileScaleY=.6,this.anims.create({key:"idle",frames:this.anims.generateFrameNumbers("balloon",{start:0,end:0}),frameRate:64}),this.anims.create({key:"pop",frames:this.anims.generateFrameNumbers("balloon",{start:0,end:16}),frameRate:96}),fetch(x+"getballoon/",{method:"get",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){C=t.angular,S=t.speed,B=t.position,k=t.direction,t.start;for(var s=function(t){var s=e.physics.add.sprite(B[t].x*window.innerWidth,B[t].y*window.innerHeight,"balloon",{ignoreGravity:!1}).setInteractive();L.push(s),L[t].displayWidth=140,L[t].displayHeight=200,L[t].body.allowGravity=!1,L[t].setBounce(0,0),L[t].setAcceleration(0,0),L[t].setCollideWorldBounds(!1),L[t].body.setGravityY(0),L[t].setVelocity(0,0),L[t].body.angularVelocity=C[t],L[t].body.angularDrag=0,L[t].on("pointerdown",(function(e){null===e.downElement.closest(".Chat")&&n.started&&n.clickBalloon(t)}))},a=0;a<3;a++)s(a)})).catch((function(e){console.log(e)}))}},{key:"update",value:function(){if(this.cloudBack.tilePositionX-=.15,this.cloudMid.tilePositionX+=.3,this.cloudFront.tilePositionX-=.75,3==L.length)for(var e=0;e<3;e++)L[e].x=window.innerWidth*B[e].x,L[e].y=window.innerHeight*B[e].y,B[e].x+=k[e].x*S[e].x,B[e].y+=k[e].y*S[e].y,B[e].x>1?B[e].x=0:B[e].x<0&&(B[e].x=1),B[e].y<0&&(B[e].y=1,B[e].x=B[e].x,k[e].x=-1*k[e].x),L[e].setVelocity(0,0)}},{key:"componentWillReceiveProps",value:function(e){n.clickBalloon=e.clickBalloon,n.started=e.gameStarted}},{key:"componentDidMount",value:function(){var e=this,t=(new v.a.Scene(n),{type:v.a.AUTO,parent:"phaser-parent",pixelArt:!1,backgroundColor:"rgba(176, 55, 110,0.5)",width:window.innerWidth,height:window.innerHeight,physics:{default:"arcade",arcade:{gravity:{y:200},debug:!1}},scene:{preload:this.preload,create:this.create,update:this.update}});n=new v.a.Game(t),console.log(n),n.clickBalloon=this.props.clickBalloon,n.started=this.props.gameStarted,this.props.socket.on("POP",(function(t){var s=t.index;L[s].play("pop"),L[s].on("animationcomplete",(function(e,t){"pop"==e.key&&L[s].anims.play("idle",!0)}),e)})),this.props.socket.on("RESETBALLOON",(function(e){S=e.speed,B=e.position,k=e.direction}))}},{key:"render",value:function(){return Object(w.jsx)("section",{id:"phaser-parent"})}}]),s}(i.Component),A=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).state={username:"",password:"",email:"",isLogin:!1,isRegister:!1},n.handleUsername=n.handleUsername.bind(Object(f.a)(n)),n.handlePassword=n.handlePassword.bind(Object(f.a)(n)),n.handleEmail=n.handleEmail.bind(Object(f.a)(n)),n.handleLogin=n.handleLogin.bind(Object(f.a)(n)),n.handleRegister=n.handleRegister.bind(Object(f.a)(n)),n.handleBack=n.handleBack.bind(Object(f.a)(n)),n}return Object(d.a)(s,[{key:"handleUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handlePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleLogin",value:function(){if(this.state.isLogin){if(""==this.state.username)return void this.props.alert.error("Input username");this.props.login(this.state.username,this.state.password)}else this.setState({isLogin:!0})}},{key:"handleBack",value:function(){this.setState({isLogin:!1,isRegister:!1})}},{key:"handleRegister",value:function(){if(this.state.isRegister){if(""==this.state.username)return void this.props.alert.error("Input username");this.props.register(this.state.username,this.state.email,this.state.password)}else this.setState({isRegister:!0})}},{key:"render",value:function(){return Object(w.jsxs)("div",{className:"Login",children:[(this.state.isLogin||this.state.isRegister)&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("p",{children:"Username"}),Object(w.jsx)("input",{value:this.state.username,onChange:this.handleUsername}),Object(w.jsx)("br",{}),this.state.isRegister&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("p",{children:"Email"}),Object(w.jsx)("input",{value:this.state.email,onChange:this.handleEmail}),Object(w.jsx)("br",{})]}),Object(w.jsx)("p",{children:"Password"}),Object(w.jsx)("input",{type:"password",value:this.state.password,onChange:this.handlePassword}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{})]}),(this.state.isRegister||this.state.isLogin)&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("button",{className:"midnight-blue-flat-button",onClick:this.handleBack,children:"BACK"}),Object(w.jsx)("div",{className:"divider"})]}),!this.state.isRegister&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("button",{className:"midnight-blue-flat-button",onClick:this.handleLogin,children:"LOGIN"}),Object(w.jsx)("div",{className:"divider"})]}),!this.state.isLogin&&Object(w.jsx)("button",{className:"midnight-blue-flat-button",onClick:this.handleRegister,children:"REGISTER"})]})}}]),s}(i.Component),P=Object(O.c)()(A),I=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{className:"Login",children:[Object(w.jsxs)("p",{children:["Welcome ",this.props.username,"!"]}),Object(w.jsx)("p",{children:"Current Balance:"}),Object(w.jsxs)("h2",{children:[this.props.balance,"uETH"]}),Object(w.jsx)("button",{onClick:function(){return e.props.handlePanels(1)},className:"midnight-blue-flat-button",children:"Top Up"}),Object(w.jsx)("div",{className:"divider"}),this.props.balance>0&&Object(w.jsx)("button",{onClick:function(){return e.props.handlePanels(2)},className:"midnight-blue-flat-button",children:"Cash Out"}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("button",{onClick:this.props.logOut,className:"midnight-blue-flat-button",children:"Quit"}),Object(w.jsx)("div",{className:"divider"}),Object(w.jsx)("button",{onClick:this.props.joinGame,className:"midnight-blue-flat-button",children:"JOIN GAME"})]})}}]),s}(i.Component),N=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{className:"Login",children:[Object(w.jsxs)("p",{children:["Welcome ",this.props.username,"!"]}),Object(w.jsxs)("p",{children:["Current Balance: ",this.props.balance]}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("p",{children:"Amount"}),Object(w.jsx)("input",{value:this.props.amount,onChange:this.props.handleAmount,type:"number"}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("p",{style:{display:"none"},children:"Private Key"}),Object(w.jsx)("input",{value:this.props.privatekey,onChange:this.props.handleKey,style:{width:"100%",display:"none"}}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("button",{onClick:function(){return e.props.handlePanels(0)},className:"midnight-blue-flat-button",children:"Back"}),Object(w.jsx)("div",{className:"divider"}),Object(w.jsx)("button",{onClick:this.props.topUp,className:"midnight-blue-flat-button",children:"Top Up"}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{})]})}}]),s}(i.Component),T=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{className:"Login",children:[Object(w.jsxs)("p",{children:["Welcome ",this.props.username,"!"]}),Object(w.jsxs)("p",{children:["Current Balance: ",this.props.balance]}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("p",{children:"Amount"}),Object(w.jsx)("input",{value:this.props.amount,onChange:this.props.handleAmount,type:"number"}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("p",{children:"Receiving Address"}),Object(w.jsx)("input",{value:this.props.coinbase,onChange:this.props.handleAddress}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)("button",{onClick:function(){return e.props.handlePanels(0)},className:"midnight-blue-flat-button",children:"Back"}),Object(w.jsx)("div",{className:"divider"}),Object(w.jsx)("button",{onClick:this.props.cashOut,className:"midnight-blue-flat-button",children:"Cash Out"}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{})]})}}]),s}(i.Component),R=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).state={messagesEndRef:o.a.createRef()},n.scrollToBottom=n.scrollToBottom.bind(Object(f.a)(n)),n}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"scrollToBottom",value:function(){this.state.messagesEndRef.current.scrollIntoView({behavior:"smooth"})}},{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{className:"Chat",style:{position:"absolute",left:"0px",bottom:"0px",backgroundColor:"#00000052",width:"350px"},children:[Object(w.jsxs)("div",{style:{height:"300px",textAlign:"left",overflow:"auto",overflowWrap:"break-word"},children:[this.props.messageList.map((function(t){return"date-separator"==t.sender?Object(w.jsxs)("div",{style:{textAlign:"center"},children:["----------",t.message,"----------"]}):Object(w.jsxs)("div",{className:"message-div",style:{color:e.props.colors[t.color]},children:[t.sender,": ",t.message," ",Object(w.jsx)("div",{className:"date",children:t.timestring})]})})),Object(w.jsx)("div",{ref:this.state.messagesEndRef})]}),Object(w.jsx)("input",{value:this.props.chatMessage,onChange:this.props.handleChat,onKeyPress:function(t){"Enter"===t.key&&e.props.sendMessage()},style:{position:"relative",bottom:"0px",width:"85%"}})]})}}]),s}(i.Component),G=s(101),W=s.n(G),D=new Promise((function(e,t){window.addEventListener("load",(function(){var t={},s=window.web3;if("undefined"!==typeof s)s=new W.a(s.currentProvider),t.web3=s,console.log("Injected web3 detected."),e(t);else{var n=new W.a.providers.HttpProvider("http://ropsten.infura.io/vKci4bjCOf3x7jLLQRWs");s=new W.a(n),t.web3=s,console.log("No web3 instance injected, using Local web3."),e(t)}}))})),E=s(68),U=s(252),H=function(e){return e.toLocaleTimeString()},K=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)},F=s.n(U)()(x),J=[{constant:!1,inputs:[{name:"amount",type:"uint256"},{name:"user",type:"bytes32"},{name:"userAddress",type:"address"},{name:"newBalance",type:"uint256"}],name:"withdraw",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"bytes32"}],name:"PlayerBalances",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"sender",type:"address"}],name:"changeAdmin",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"user",type:"bytes32"}],name:"deposit",outputs:[{name:"success",type:"bool"}],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"admin",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[],payable:!0,stateMutability:"payable",type:"constructor"}],_=["#f72585","#b5179e","#7209b7","#560bad","#480ca8","#ffadad","#57cc99","#80ed99","#ff0a54","#ff477e","#ff5c8a","#004b23","#006400","#007200","#38b000","#ff7b00","#ff9500","#ffb700"],q=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).state={web3:null,currentUser:"",username:"",password:"",sessionId:"",coinbase:"",privateKey:"",key:null,userCount:0,balance:0,spent:0,gameStarted:!1,forcePop:!1,currentPanel:0,amount:0,messageList:[{sender:"GM",message:"Welcome to Balloon Game!",date:(new Date).getUTCMilliseconds(),timestring:H(new Date)}],chatMessage:"",colorIndex:0,boomMsgList:[]},n.login=n.login.bind(Object(f.a)(n)),n.logOut=n.logOut.bind(Object(f.a)(n)),n.register=n.register.bind(Object(f.a)(n)),n.getBalance=n.getBalance.bind(Object(f.a)(n)),n.handlePanels=n.handlePanels.bind(Object(f.a)(n)),n.handleKey=n.handleKey.bind(Object(f.a)(n)),n.handleAmount=n.handleAmount.bind(Object(f.a)(n)),n.handleAddress=n.handleAddress.bind(Object(f.a)(n)),n.handleMessageBox=n.handleMessageBox.bind(Object(f.a)(n)),n.joinGame=n.joinGame.bind(Object(f.a)(n)),n.quitGame=n.quitGame.bind(Object(f.a)(n)),n.sendMessage=n.sendMessage.bind(Object(f.a)(n)),n.topUp=n.topUp.bind(Object(f.a)(n)),n.cashOut=n.cashOut.bind(Object(f.a)(n)),n.clickBalloon=n.clickBalloon.bind(Object(f.a)(n)),n}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=this;F.on("connect",(function(){console.log("connected"),t.setState({sessionId:F.id})})),F.on("ADD",(function(e){console.log(e),t.setState({userCount:e.count})})),F.on("POP",(function(e){console.log(e),t.setState({forcePop:!0})})),F.on("CheckBalance",(function(e){console.log(e),t.getBalance()})),F.on("CHAT",(function(t){if("I won."===t.message&&t.sender!==e.state.username){var s=t.sender+": Just won +100",n=e,a=e.state.boomMsgList;a.push(s),e.setState({boomMsgList:a}),console.log(e.state.boomMsgList),setTimeout((function(){var e=n.state.boomMsgList;e.pop(),n.setState({boomMsgList:e})}),5e3)}"I won."===t.message&&(t.message="I just won +100.");var i=e.state.messageList,o=new Date(t.date);if(1==i.length){var r={sender:"date-separator",date:t.date,message:o.toLocaleDateString()};i.push(r)}else{var c=new Date(i[i.length-1].date);if(o.toLocaleDateString()!=c.toLocaleDateString()){r={sender:"date-separator",date:t.date,message:o.toLocaleDateString()};i.push(r)}}i.push({sender:t.sender,message:t.message,color:t.color,date:t.date,timestring:H(o)}),e.setState({messageList:i})})),F.on("HISTORY",(function(e){var s=t.state.messageList;if(!(s.length>1)){for(var n=0;n<e.length;n++){var a=e[n],i=new Date(a.date);if(0==n){var o={sender:"date-separator",date:a.date,message:i.toLocaleDateString()};s.push(o)}else{var r=new Date(e[n-1].date);if(i.toLocaleDateString()!=r.toLocaleDateString()){o={sender:"date-separator",date:a.date,message:i.toLocaleDateString()};s.push(o)}}"I won."===a.message&&(a.message="I just won +100."),"I won."!==a.message&&s.push({sender:a.sender,message:a.message,color:a.color,date:a.date,timestring:H(i)})}t.setState({messageList:s})}})),D.then((function(t){e.setState({web3:t.web3});t.web3.eth.getAccounts((function(s,n){if(n&&0!=n.length&&e.setState({coinbase:n[0]}),localStorage.getItem("defaultWallet")&&localStorage.getItem("defaultWallet").length>30){var a=localStorage.getItem("defaultWallet"),i=localStorage.getItem("defaultKey");i.length>32&&(i=i.substr(2,i.length-1)),e.setState({coinbase:a,pKey:i});var o=t.web3.eth.accounts.privateKeyToAccount(localStorage.getItem("defaultKey"));console.log(o),console.log(t.web3.eth.accounts.wallet)}})).catch((function(){console.log("Error finding web3.")}))})),this.setState({colorIndex:K(0,_.length)})}},{key:"register",value:function(e,t,s){var n=this;console.log("Registering..."),fetch(x+"register/",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:e,email:t,password:s})}).then((function(e){return e.json()})).then((function(t){"Ok"!=t.status?n.props.alert.show(t.status):n.login(e,s)})).catch((function(e){console.log(e)}))}},{key:"login",value:function(e,t){var s=this;fetch(x+"login/",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:e,password:t,sessionId:this.state.sessionId})}).then((function(e){return e.json()})).then((function(n){if("Ok"!=n.status)s.props.alert.show(n.status);else{var a=s.state.web3.utils.soliditySha3(e);s.setState({currentUser:a,username:e,password:t},(function(){this.getBalance()}))}})).catch((function(e){console.log(e)}))}},{key:"logOut",value:function(){document.location.reload()}},{key:"getBalance",value:function(){var e=Object(g.a)(m.a.mark((function e(){var t,s,n,a=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=E.a.getDefaultProvider("ropsten"),s=new E.a.Contract("0x7Af6faCB28061cFEb5f7D6538B4d63988C8AeE66",J,t),e.next=4,s.PlayerBalances(this.state.currentUser);case 4:n=e.sent,console.log(1e4*E.a.utils.formatEther(n)),this.setState({balance:Number((1e4*E.a.utils.formatEther(n)).toFixed(0))}),fetch(x+"balances/",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:this.state.currentUser,sessionId:this.state.sessionId})}).then((function(e){return e.json()})).then((function(e){"Ok"!=e.status?console.log(e.status):(console.log(e.spent),a.setState({spent:Number(e.spent)}))})).catch((function(e){console.log(e)}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clickBalloon",value:function(e){var t=this;F.emit("POP",e),this.state.gameStarted&&(console.log("CLICKED"),fetch(x+"click/",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:this.state.currentUser,key:this.state.key,sessionId:this.state.sessionId})}).then((function(e){return e.json()})).then((function(e){"Winner"==e.status?(t.props.alert.success(Object(w.jsx)("div",{style:{fontSize:"2em"},children:"+100"}),{position:O.b.MIDDLE}),t.setState({spent:t.state.spent+100}),F.emit("CHAT",{sender:t.state.username,message:"I won.",color:t.state.colorIndex})):"Loser"==e.status?(t.props.alert.show("-10",{position:O.b.BOTTOM_RIGHT}),t.setState({spent:t.state.spent-10})):t.props.alert.show(e.status)})).catch((function(e){console.log(e)})))}},{key:"joinGame",value:function(){var e=this;fetch(x+"joinGame/",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:this.state.currentUser,key:this.state.key,sessionId:this.state.sessionId})}).then((function(e){return e.json()})).then((function(t){"Ok"!=t.status?e.props.alert.show(t.status):e.setState({key:t.key,gameStarted:!0})})).catch((function(e){console.log(e)}))}},{key:"topUp",value:function(){var e=Object(g.a)(m.a.mark((function e(){var t,s,n,a,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new this.state.web3.eth.Contract(J,"0x7Af6faCB28061cFEb5f7D6538B4d63988C8AeE66"),e.next=3,window.ethereum.request({method:"eth_requestAccounts"});case 3:return s=e.sent,e.next=6,window.ethereum.request({method:"eth_chainId"});case 6:if(3==e.sent){e.next=10;break}return this.props.alert.error("Wrong network"),e.abrupt("return");case 10:return n=E.a.utils.parseEther(this.state.amount).toString(),a={gasLimit:53e3,from:s[0],value:n},i=this,t.methods.deposit(this.state.currentUser).send(a).on("transactionHash",(function(){i.props.alert.show("Please Await Transaction"),i.setState({currentPanel:0})})).on("receipt",(function(e){i.props.alert.show("Deposit Confirmed"),i.getBalance()})),e.abrupt("return");case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cashOut",value:function(){var e=this;fetch(x+"withdraw/",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({key:this.state.key,username:this.state.currentUser,password:this.state.password,address:this.state.coinbase,sessionId:this.state.sessionId,amount:this.state.amount})}).then((function(e){return e.json()})).then((function(t){"Ok"!=t.status?e.props.alert.show(t.status):(e.props.alert.show("Withdrawal Confirmed"),e.setState({currentPanel:0}))})).catch((function(e){console.log(e)}))}},{key:"quitGame",value:function(){var e=this;fetch(x+"quitGame/",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:this.state.currentUser,key:this.state.key,sessionId:this.state.sessionId})}).then((function(e){return e.json()})).then((function(t){"Ok"!=t.status?e.props.alert.show(t.status):(e.setState({gameStarted:!1}),e.getBalance())})).catch((function(e){console.log(e)}))}},{key:"sendMessage",value:function(){var e=""==this.state.username?"Guest":this.state.username;F.emit("CHAT",{sender:e,message:this.state.chatMessage,color:this.state.colorIndex}),this.setState({chatMessage:""})}},{key:"handleMessageBox",value:function(e){this.setState({chatMessage:e.target.value})}},{key:"handlePanels",value:function(e){this.setState({currentPanel:e})}},{key:"handleKey",value:function(e){this.setState({privateKey:e.target.value})}},{key:"handleAmount",value:function(e){this.setState({amount:e.target.value})}},{key:"handleAddress",value:function(e){this.setState({coinbase:e.target.value})}},{key:"render",value:function(){var e=[Object(w.jsx)(I,{joinGame:this.joinGame,logOut:this.logOut,username:this.state.username,balance:this.state.balance+this.state.spent,handlePanels:this.handlePanels}),Object(w.jsx)(N,{joinGame:this.joinGame,username:this.state.username,balance:this.state.balance+this.state.spent,handlePanels:this.handlePanels,handleAmount:this.handleAmount,amount:this.state.amount,privateKey:this.state.privateKey,handleKey:this.handleKey,topUp:this.topUp}),Object(w.jsx)(T,{joinGame:this.joinGame,username:this.state.username,balance:this.state.balance+this.state.spent,handlePanels:this.handlePanels,coinbase:this.state.coinbase,handleAmount:this.handleAmount,handleAddress:this.handleAddress,amount:this.state.amount,cashOut:this.cashOut})];return Object(w.jsxs)("div",{className:"Home",children:[this.state.boomMsgList.length>0&&Object(w.jsx)("div",{className:"boom-message-list",children:Object(w.jsx)("div",{children:Object(w.jsx)("div",{children:this.state.boomMsgList.map((function(e){return Object(w.jsx)("div",{children:Object(w.jsx)("div",{className:"boom-message",style:{backgroundImage:"url(/images/boom.png)"},children:e})})}))})})}),Object(w.jsxs)("div",{className:"Panel",children:[Object(w.jsx)("h1",{children:"Balloon Game"}),""==this.state.currentUser?Object(w.jsx)(P,{login:this.login,register:this.register}):this.state.gameStarted?null:e[this.state.currentPanel]]}),this.state.gameStarted&&Object(w.jsx)(R,{messageList:this.state.messageList,chatMessage:this.state.chatMessage,handleChat:this.handleMessageBox,sendMessage:this.sendMessage,colors:_}),Object(w.jsx)(M,{userCount:this.state.userCount,clickBalloon:this.clickBalloon,gameStarted:this.state.gameStarted,socket:F}),Object(w.jsxs)("div",{style:{position:"absolute",left:"0px",top:"0px",backgroundColor:"#00000052",borderRadius:"5px",margin:"10px",color:"white",padding:"5px"},children:[Object(w.jsx)("h1",{children:this.state.userCount}),"Players"]}),Object(w.jsxs)("div",{style:{position:"absolute",right:"0px",top:"0px",backgroundColor:"#00000052",borderRadius:"5px",margin:"10px",color:"white",padding:"5px"},children:["Balance",Object(w.jsx)("h1",{children:this.state.balance+this.state.spent})]}),this.state.gameStarted?Object(w.jsx)("div",{onClick:this.quitGame,style:{position:"absolute",right:"0px",bottom:"0px",backgroundColor:"#00000052",borderRadius:"5px",margin:"10px",color:"white",padding:"5px"},children:"Quit Game"}):null]})}}]),s}(i.Component),X=Object(O.c)()(q),Y=function(e){Object(u.a)(s,e);var t=Object(h.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){return Object(w.jsx)("div",{className:"App",children:Object(w.jsx)(p.a,{children:Object(w.jsxs)("div",{children:[Object(w.jsx)(b.a,{exact:!0,path:"/",render:function(e){return Object(w.jsx)(X,Object(a.a)({},e))}}),Object(w.jsx)(b.a,{path:"/exchange",render:function(e){return Object(w.jsx)(M,Object(a.a)({},e))}})]})})})}}]),s}(i.Component),V=s(255);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(w.jsx)(O.a,Object(a.a)(Object(a.a)({template:V.a},{position:"bottom center",timeout:5e3,offset:"30px",transition:"fade"}),{},{children:Object(w.jsx)(Y,{})})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[546,1,2]]]);
//# sourceMappingURL=main.76deec4f.chunk.js.map